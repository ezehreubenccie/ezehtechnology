---

- name: REMOVE ASA BOOT VARIABLES
  hosts: labasa1
  connection: network_cli
  gather_facts: false

  vars:
    asa_image: "asa964-41-lfbff-k8.SPA"
  tasks:
    - name: Get boot Variables
      asa_command: 
        commands: 
          - command: sh run boot
      register: bootvar

    - debug:
        var: bootvar  
    - name: set fact
      set_fact:
        bootvar1: "{{ bootvar['stdout'][0].split('\n')[0] }}"
        bootvar2: "{{ bootvar['stdout'][0].split('\n')[1] }}"
      
    - debug:
        msg: 'primary boot var is {{ bootvar1 }} and secondary boot var is {{ bootvar2 }}'
      tags:
        - bootvars
    - name: Remove ASA boot Variables
      asa_config:
        lines:
          - 'no  {{ bootvar1 }}' 
          - 'no  {{ bootvar2 }}' 
      when:
        - vars['asa_image'] not in bootvar1
      tags:
        - bootvars    
           
   
  
