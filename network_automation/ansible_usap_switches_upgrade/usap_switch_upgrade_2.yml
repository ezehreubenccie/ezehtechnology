---

- name : GATHER SWITCH FACTS
  connection: network_cli
  hosts: lnv-2960x-sw01 maitlndfl-2960x-sw-stack
  gather_facts: false

  vars:
    switch:
       # ios_model: "WS-C2960XR-48FPD-I":
        ios_version: "15.2(7)E2"
        ios_path: "IOS/"
        ios_archive: "c2960x-universalk9-tar.152-7.E2.tar"
        ios_binary: "c2960x-universalk9-mz.152-7.E2.bin"
        ios_md5: "07195a8c7866ac2a91c64b716465c516"
        ios_size_kb: 37489


  tasks:
    - name: Gather all legacy facts
      ios_facts:
        gather_subset: hardware
      register: output
      tags:
        - facts
    

 
    - name: Check Boot path
      ios_command:
        commands: 'show boot | i BOOT'
      register: bootvar
      when:
       # - ansible_net_model == "WS-C2960X-48FPD-L"
       # - ansible_net_version != "15.2(2)E7"
        - ansible_net_version != switch['ios_version']
      tags:
        - bootvar

    - debug:
        var: bootvar
